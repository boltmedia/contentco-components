{"version":3,"file":"Select.js","sources":["../src/Input/Select.jsx"],"sourcesContent":["import React, { useState, useEffect, memo } from 'react';\nimport PropTypes from 'prop-types';\nimport Styles from './Input.module.scss';\nimport classNames from 'classnames';\nimport InitialSelect from 'react-select';\nimport InitialAsyncSelect from 'react-select/async';\nimport InitialAsyncPaginate from 'react-select-async-paginate';\nimport InitialCreatableSelect from 'react-select/creatable';\n\nconst Select = memo(InitialSelect);\nconst AsyncSelect = memo(InitialAsyncSelect);\nconst AsyncPaginate = memo(InitialAsyncPaginate);\nconst CreatableSelect = memo(InitialCreatableSelect);\n\nconst RightArrow = () => <span className={Styles.rightArrow} />;\nconst DownArrow = () => <span className={Styles.downArrow} />;\n\nconst Option = (props) => {\n  const {\n    data,\n    getStyles,\n    innerRef,\n    innerProps,\n    indentBy = 0,\n    selectOption,\n    selectProps\n  } = props;\n  const [isExpanded, setIsExpanded] = useState(false);\n  const newInnerProps = { ...innerProps, onClick: () => selectOption(data) };\n  const children =\n    (data && selectProps?.getOptionChildren?.(data)) || data?.children || [];\n  return (\n    <React.Fragment>\n      <div className={Styles.multiLevelOption}>\n        <div className={Styles.actions}>\n          {props.data?.children?.length > 0 && (\n            <button\n              className={Styles.action}\n              onClick={() => setIsExpanded(!isExpanded)}\n            >\n              {isExpanded ? <RightArrow /> : <DownArrow />}\n            </button>\n          )}\n        </div>\n        <div\n          {...newInnerProps}\n          style={{ marginLeft: `${20 * indentBy}px` }}\n          className={Styles.optionItem}\n        >\n          {selectProps?.getOptionLabel?.(data)}\n        </div>\n      </div>\n      {isExpanded && children?.length > 0\n        ? children?.map((v, idx) => (\n            <Option key={idx} {...props} data={v} indentBy={indentBy + 1} />\n          ))\n        : null}\n    </React.Fragment>\n  );\n};\n\nconst customStyles = {\n  option: (provided, state) => ({\n    ...provided\n  }),\n  input: (styles) => ({\n    ...styles,\n    margin: 0,\n    padding: 0\n  }),\n  menu: (styles) => ({\n    ...styles,\n    margin: '2px 0'\n  }),\n  placeholder: (styles) => ({\n    ...styles\n  }),\n  control: (styles) => ({\n    ...styles,\n    boxShadow: 'none',\n    ':hover': {\n      borderColor: '#a1aab3'\n    }\n  }),\n  valueContainer: (styles) => ({\n    ...styles,\n    padding: '2px 15px',\n    fontSize: '16px'\n  }),\n  singleValue: (styles) => ({\n    ...styles,\n    marginLeft: '0',\n    fontSize: '16px'\n  })\n};\n\nconst SelectInput = ({\n  disabled,\n  name,\n  className,\n  label,\n  placeholder,\n  onChange,\n  classNamePrefix,\n  ...props\n}) => {\n  const [value, setValue] = useState(props.value || props.defaultValue);\n  const containerClass = classNames(\n    Styles.container,\n    className,\n    props.isMulti && value?.length && Styles.active,\n    !props.isMulti && Object.keys(value || {}).length && Styles.active,\n    disabled && Styles.locked,\n    props.error && Styles.containerError,\n    props.isMulti && Styles.multiContainer\n  );\n\n  useEffect(() => {\n    if (props.value) {\n      setValue(props.value);\n    }\n  }, [props.value]);\n\n  const fieldClass = classNames(\n    Styles.select,\n    props.isMulti && Styles.multi,\n    props.error && Styles.error\n  );\n\n  const labelClass = classNames(\n    Styles.label,\n    props.error && Styles.error,\n    props.isMulti && value?.length && Styles.hasValue,\n    !props.isMulti && Object.keys(value || {}).length && Styles.hasValue\n  );\n\n  const handleChange = (event, { action, name }) => {\n    setValue(event);\n    // Pass any other change events from parent\n    try {\n      onChange({ ...event, target: { name, value: event }, action });\n    } catch (err) {}\n  };\n\n  const CustomSelect = props.isPaginated\n    ? AsyncPaginate\n    : props.isAsync\n    ? AsyncSelect\n    : Select;\n  const SelectComponent = props.isCreatable ? CreatableSelect : Select;\n  return (\n    <div\n      className={containerClass}\n      {...{ 'data-test-id': props['data-test-id'] || name }}\n    >\n      <CustomSelect\n        className={fieldClass}\n        styles={customStyles}\n        name={name}\n        placeholder={placeholder || label}\n        selectValue={value}\n        defaultValue={value}\n        onChange={handleChange}\n        additional={{ page: 1 }}\n        SelectComponent={SelectComponent}\n        createOptionPosition='first'\n        isDisabled={disabled}\n        classNamePrefix={classNamePrefix}\n        closeMenuOnSelect={!props.isMulti}\n        {...props}\n        {...(props.isMultiLevel && {\n          components: { ...props.components, Option }\n        })}\n      />\n\n      <label htmlFor={name} className={labelClass}>\n        {props.error || label}\n      </label>\n    </div>\n  );\n};\n\nSelectInput.propTypes = {\n  classNamePrefix: PropTypes.string,\n  'data-test-id': PropTypes.string,\n  isMultiLevel: PropTypes.bool,\n  getOptionChildren: PropTypes.func\n};\n\nSelectInput.defaultProps = {\n  menuPlacement: 'auto',\n  classNamePrefix: 's-contact',\n  isAsync: false,\n  isPaginated: false\n};\n\nexport default SelectInput;\n"],"names":["Select","memo","InitialSelect","AsyncSelect","InitialAsyncSelect","AsyncPaginate","InitialAsyncPaginate","CreatableSelect","InitialCreatableSelect","RightArrow","React","className","Styles","rightArrow","DownArrow","downArrow","Option","props","data","getStyles","innerRef","innerProps","indentBy","selectOption","selectProps","useState","isExpanded","setIsExpanded","newInnerProps","onClick","children","getOptionChildren","_selectProps$getOptio","Fragment","multiLevelOption","actions","length","action","style","marginLeft","optionItem","getOptionLabel","_selectProps$getOptio2","map","v","idx","key","customStyles","option","provided","state","input","styles","margin","padding","menu","placeholder","control","boxShadow","borderColor","valueContainer","fontSize","singleValue","SelectInput","disabled","name","label","onChange","classNamePrefix","value","defaultValue","setValue","containerClass","classNames","container","isMulti","active","Object","keys","locked","error","containerError","multiContainer","useEffect","fieldClass","select","multi","labelClass","hasValue","CustomSelect","isPaginated","isAsync","SelectComponent","isCreatable","selectValue","event","target","err","additional","page","createOptionPosition","isDisabled","closeMenuOnSelect","isMultiLevel","components","htmlFor","propTypes","PropTypes","string","bool","func","defaultProps","menuPlacement"],"mappings":"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"}